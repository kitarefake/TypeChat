Here is a YAML schema that defines the structure of a restaurant order.
type: array
items:
  oneOf:
    - type: object
      properties:
        type:
          type: string
          enum: [pizza]
        size:
          type: string
          enum: [small, medium, large, extra large]
          default: large
        toppings:
          type: array
          items:
            type: string
            enum: [pepperoni, sausage, mushrooms, basil, extra cheese, extra sauce, anchovies, pineapple, olives, arugula, Canadian bacon]
      required: [type]
    - type: object
      properties:
        type:
          type: string
          enum: [salad]
        size:
          type: string
          enum: [whole, half]
          default: half
        style:
          type: string
          enum: [Garden, Greek]
          default: Garden
        removed:
          type: array
          items:
            type: string
            enum: [red onions, croutons]
      required: [type]
    - type: object
      properties:
        type:
          type: string
          enum: [beer]
        kind:
          type: string
          enum: [Sierra Nevada Pale Ale, Mack & Jacks]
        quantity:
          type: integer
          minimum: 1
          default: 1
      required: [type, kind]
      
I'd like two large, one with pepperoni and the other with extra sauce.  The pepperoni gets basil and the extra sauce gets Canadian bacon.  And add a whole salad. Make the Canadian bacon a medium. Make the salad a Greek with no red onions.  And give me two Mack and Jacks and a Sierra Nevada.  Oh, and add another salad with no red onions.



Possible YAML array:

- type: pizza
  size: large
  toppings: [pepperoni, basil]
- type: pizza
  size: medium
  toppings: [extra sauce, Canadian bacon]
- type: salad
  size: whole
  style: Greek
  removed: [red onions]
- type: salad
  size: half
  style: Garden
  removed: [red onions]
- type: beer
  kind: Mack & Jacks
  quantity: 2
- type: beer
  kind: Sierra Nevada Pale Ale
  quantity: 1

  I'd like two large with olives and mushrooms.  And the first one gets extra sauce.  The second one gets basil.  Both get arugula.  And add a Pale Ale. Give me a two Greeks with no red onions, a half and a whole.  And a large with sausage and mushrooms.  Plus three Pale Ales and a Mack and Jacks.



Possible YAML array:

- type: pizza
  size: large
  toppings: [olives, mushrooms, extra sauce, arugula]
- type: pizza
  size: large
  toppings: [olives, mushrooms, basil, arugula]
- type: beer
  kind: Sierra Nevada Pale Ale
- type: salad
  size: half
  style: Greek
  removed: [red onions]
- type: salad
  size: whole
  style: Greek
  removed: [red onions]
- type: pizza
  size: large
  toppings: [sausage, mushrooms]
- type: beer
  kind: Sierra Nevada Pale Ale
  quantity: 3
- type: beer
  kind: Mack & Jacks

I'll take two pepperoni and add olives to the second one.  Make the olive a small.  And give me whole Greek plus a Pale Ale and an M&J.
YAML ARRAY:


- type: pizza
  size: large
  toppings: [pepperoni]
- type: pizza
  size: small
  toppings: [pepperoni, olives]
- type: salad
  size: whole
  style: Greek
- type: beer
  kind: Sierra Nevada Pale Ale
- type: beer
  kind: Mack & Jacks


I want three pizzas, one with mushrooms and the other two with sausage.  Make one sausage a small.  And give me a whole Greek and a Pale Ale.  And give me a Mack and Jacks.


Possible YAML array:

- type: pizza
  toppings: [mushrooms]
- type: pizza
  size: small
  toppings: [sausage]
- type: pizza
  toppings: [sausage]
- type: salad
  size: whole
  style: Greek
- type: beer
  kind: Sierra Nevada Pale Ale
- type: beer
  kind: Mack & Jacks

      "I would like to order one with basil and one with extra sauce.  Throw in a salad and an ale.",

output:

- type: pizza
  toppings: [basil]
- type: pizza
  toppings: [extra sauce]
- type: salad
- type: beer
  kind: Sierra Nevada Pale Ale

     "I would love to have a pepperoni with extra sauce, basil and arugula. Lovely weather we're having. Throw in some pineapple.  And give me a whole Greek and a Pale Ale.  Boy, those Mariners are doggin it. And how about a Mack and Jacks.",

output:

- type: pizza
  toppings: [pepperoni, extra sauce, basil, arugula, pineapple]
- type: salad
  size: whole
  style: Greek
- type: beer
  kind: Sierra Nevada Pale Ale
- type: beer
  kind: Mack & Jacks

      "I'll have two pepperoni, the first with extra sauce and the second with basil.  Add pineapple to the first and add olives to the second.",
output:

- type: pizza
  size: large
  toppings: [pepperoni, extra sauce, pineapple]
- type: pizza
  size: large
  toppings: [pepperoni, basil, olives]

     "I sure am hungry for a pizza with pepperoni and a salad with no croutons.  And I'm thirsty for 3 Pale Ales",
output:

- type: pizza
  toppings: [pepperoni]
- type: salad
  removed: [croutons]
- type: beer
  kind: Sierra Nevada Pale Ale
  quantity: 3

   "give me three regular salads and two Greeks and make the regular ones with no red onions",
output:

- type: salad
  size: half
  style: Garden
  removed: [red onions]
- type: salad
  size: half
  style: Garden
  removed: [red onions]
- type: salad
  size: half
  style: Garden
  removed: [red onions]
- type: salad
  size: half
  style: Greek
- type: salad
  size: half
  style: Greek

        "I'll take four pepperoni pizzas and two of them get extra sauce.  plus an M&J and a Pale Ale",
output:

- type: pizza
  size: large
  toppings: [pepperoni, extra sauce]
- type: pizza
  size: large
  toppings: [pepperoni, extra sauce]
- type: pizza
  size: large
  toppings: [pepperoni]
- type: pizza
  size: large
  toppings: [pepperoni]
- type: beer
  kind: Mack & Jacks
- type: beer
  kind: Sierra Nevada Pale Ale

